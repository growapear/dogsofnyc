<!DOCTYPE html>
<html lang="en">

<title>Dog in Staten Island</title>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/2.2.2/scrollama.min.js"></script> -->
    <script src="scrollama.min.js"></script>
   <link rel="stylesheet" href="style.css" /> 

</head>
<body>
    <section id="intro">
        <div class="intro-content">
            <h1>The Dogs of New York City</h1>
        </div>
        <h4><strong>Uncover NYC's dog culture through names that reflect each borough's unique charm.</strong></h4>
            <div id="view">
            <p>Select your interest borough</p>
        </div>
            <nav>
                <ul>
                    <li><a class="nav-button" href="index.html">Manhattan</a></li>
                    <li><a class="nav-button" href="page1.html">Brooklyn</a></li>
                    <li><a class="nav-button" href="page2.html">Bronx</a></li>
                    <li><a class="nav-button" href="page3.html">Queens</a></li>
                    <li><a class="nav-button" href="page4.html">Staten Island</a></li>
                </ul>
            </nav>
            <div id="scroll">
                <h5><strong><em>Scroll to explore</em></strong></h5>
            </div>
        </div>
    </section>
    <div id="map-container">
        <div id="map" class="sticky-map"></div>
    </div>
    
    <main id="project-wrapper">
        <section id="scrolly">
            <article>
                <div class="step" data-step="0">
                    <img src="assets/dogoverall.png" alt="Dogs of NYC" class="header-image">
                    <h3><strong>The Dogs of New York City</strong></h3>
                    <h5 style="font-weight: normal; font-style: normal;">As the sun rises over New York City, the streets begin to bustle not just with humans, but with their loyal canine companions. In every neighborhood, from the lively streets of Brooklyn to the more refined avenues of Manhattan, dogs are an integral part of city life. Each borough has its own unique dog culture, and with it, its own popular dog names. This interactive exploration will take you on a journey through the neighborhoods of New York City, uncovering the stories behind the most beloved dog names and how they reflect the character of each borough. So, let's meet the dogs of NYC, one name at a time.</h5>
                    <h3><strong>Staten Island — The Laidback Locals</strong></h3>
                    <p class="description-text" style="font-style: normal;">Staten Island pups have names that reflect the borough’s easygoing, suburban vibe. Whether they're enjoying a quiet day in the park or playing with their neighborhood pals, dogs here have names that exude warmth and friendliness. Classic favorites like Bella and Max mingle with names like Bailey and Buddy, all adding to the laidback charm that defines Staten Island’s dog scene.</p>
                    <p class="source-text">Based on Dog License Data from 2014-2024 <a href="https://data.cityofnewyork.us/Health/NYC-Dog-Licensing-Dataset/nu7n-tubp/about_data" target="_blank">NYC OpenData</a></p>
                </div>
                <div class="step" data-step="1">
                    <img src="assets/max.png" alt="Max" class="header-image">
                    <h3><strong> "Max"</strong></h3>
                    <h5><strong>The Top Male Name in Staten Island</strong></h5>
                    <p class="description-text" style="font-style: normal;">Max reigns supreme in Staten Island too, where laid-back vibes meet classic charm. As a name, it’s both friendly and dependable, just like the friendly neighborhoods and close-knit community on the island. Max dogs tend to be the ones you can count on for a good walk around the block or a chill afternoon at the park with the family.</p>
                </div>
                <div class="step" data-step="2">
                    <img src="assets/bella.png" alt="Bella" class="header-image">
                    <h3><strong> "Bella"</strong></h3>
                    <h5><strong>The Top Female Name in Staten Island</strong></h5>
                    <p class="description-text" style="font-style: normal;">Bella takes the crown in Staten Island, where this name’s elegance and warmth fit right in with the friendly and family-oriented vibe of the island. Bella dogs are often the ones you’ll see happily bounding through quiet parks or enjoying the peace of Staten Island’s many green spaces. Whether they’re chasing after a ball or cuddling up at home, a Bella dog is all about love, loyalty, and comfort.</p>
                </div>                
                <div class="step" data-step="3">
                    <h3 class="smaller-heading" style="margin-top: 3rem;"><strong>Time Trends showing how dog names have evolved over the years</strong></h3>
                    <p class="description-text compact" style="font-style: normal;">Staten Island's favorite dog name in 2010 was "Bella," with 11,236 dogs sharing this elegant name. Much like the borough itself, Bella carries a sense of grace and charm while being grounded in the community. Known for its beautiful parks and family-oriented vibe, Staten Island's Bellas are often seen enjoying the outdoors, whether at the Staten Island Greenbelt or along the shores of the beach. This name conveys warmth and loyalty, making it a perfect fit for Staten Island’s suburban, close-knit atmosphere.</p>
                    <div class="chart-container" id="chart5" style="margin-top: -2rem;"></div>
                </div>
                  
                <div class="step" data-step="4">
                    <h3 style="margin-top: 2rem;"><strong>Staten Island's Most Pawpular: Yorkshire Terrier & Shih Tzu</strong></h3>
                    <p class="description-text" style="font-style: normal; font-size: 0.85rem;">In Staten Island, the small but mighty Yorkshire Terrier and the sweet, affectionate Shih Tzu make ideal pets for a more suburban lifestyle. Yorkies, known for their courage and charisma, enjoy quiet walks along the Staten Island Greenbelt, while their larger-than-life personalities are a great match for the island’s tight-knit communities. Shih Tzus, with their gentle and loyal temperament, are perfect for those who love peaceful moments in nature, whether they’re enjoying the Staten Island Zoo or relaxing at one of the local cafes. Together, these breeds encapsulate the easy-going yet spirited vibe that Staten Island residents cherish.</p>
                    
                    <div class="dropdown" style="margin: 10px 0;">
                        <label for="dogSelector">Select Dog Breed:</label>
                        <select id="dogSelector">
                            <option value="all">-- Select a Dog Name --</option>
                        </select>
                    </div>

                    <div id="piechart5" class="borough-container">
                    </div>
                    <div class="tooltip" id="tooltip"></div>
                </div>
            </article>
        </section>
    </main>

    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="piechart.js"></script>
    <script>

// Using d3 for convenience
var main = d3.select("main");
var scrolly = main.select("#scrolly");
var steps = scrolly.selectAll(".step");


// Initialize the scrollama
var scroller = scrollama();

// Resize function to set step heights
function handleResize() {
    var stepH = Math.floor(window.innerHeight * 0.75);
    steps.style("height", stepH + "px");
    scroller.resize();
}



// Setup the Scrollama instance, pass callback functions
scroller.setup({
    step: '.step',
    offset: 0.5,
    order: true, // Scrollama will trigger the steps in order
    once: false // Allow steps to be triggered multiple times

}).onStepEnter(handleStepEnter);

// Scrollama event handler
function handleStepEnter(response) {
    if (!map.isStyleLoaded()) {
        console.warn("Map style not fully loaded yet.");
        return;
    }

    steps.classed("is-active", false);
    d3.select(response.element).classed("is-active", true);

    const currentStep = response.element.getAttribute('data-step');

    // Reset filters initially (optional, based on your use case)
    map.setFilter('dog-wordcloud-layer', null);

    switch (currentStep) {
        case '0':
            // Step 0: Do not show the layer (hide)
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'none');
            break;
        case '1':
            // Step 1: Show only blue items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['==', ['get', 'Color'], 'blue']);
            break;
        case '2':
            // Step 2: Show only pink items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['==', ['get', 'Color'], 'pink']);
            break;
        case '3':
            // Step 3: Show both blue and pink items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['in', ['get', 'Color'], 'blue', 'pink']);
            break;
        case '4':
            // Step 4: Show both blue and pink items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['in', ['get', 'Color'], 'blue', 'pink']);
            break;
        default:
            console.warn(`No action defined for step ${currentStep}`);
    }
}



// Resize event listener
window.addEventListener('resize', handleResize);

// Load the map and then initialize the scrollytelling
mapboxgl.accessToken = 'pk.eyJ1IjoicGFueWFudXMiLCJhIjoiY2x6MXo0Ym9jMWZ6cjJrb2l6YXk2NnAzaSJ9._smojqWBDds304Vg0Ubtmw';

        // Initialize the Map
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/panyanus/cm2mt0d7o004x01qjhaprhmtg',
            center: [-74.2502, 40.5795], // Adjust as necessary
            zoom: 11,
            projection: 'mercator'
        });

// Load the map and add the tileset source
map.on('load', () => {
    console.log('Map style is fully loaded.');

    // Your layer and source addition code here
    map.addSource('dog-wordcloud-source', {
        type: 'vector',
        url: 'mapbox://panyanus.5n9zfn9m'
    });

    map.addLayer({
        id: 'dog-wordcloud-layer',
        type: 'symbol',
        source: 'dog-wordcloud-source',
        'source-layer': 'si-wordcloud_data_top5_lat_ln-8zjgbn',
        layout: {
            'text-field': ['get', 'AnimalName'],
            'text-size': ['get', 'Size'],
            'text-allow-overlap': true
        },
        paint: {
        'text-color': [
            'match',
            ['get', 'Color'], // 获取 'Color' 字段的值
            'pink', '#E754A3', // 适中的粉色
            'blue', '#4D8FD3', // 适中的蓝色
            '#000000' // 默认颜色（黑色），如果没有匹配
        ],
        'text-opacity': 1
}
    });
    // Add the source for the boundary data
    map.addSource('boundary-source', {
        type: 'vector',
        url: 'mapbox://panyanus.bwlr0xda' // Ensure this matches your tileset ID
    });

    // Add a layer for boundaries
    map.addLayer({
        id: 'boundary', // Updated layer ID
        type: 'line', // Use 'line' type for boundaries
        source: 'boundary-source', // Use the correct source name
        'source-layer': 'si-neighborhood_top5_summary-a5ncpc', // Update to the correct source-layer for boundaries
        layout: {
            'line-join': 'round',
            'line-cap': 'round'
        },
        paint: {
            'line-color': '#ffffff', // White color for boundary lines
            'line-width': 2 // Adjust the line width as needed
        }
    });
});

                                                              
    </script>
    
</body>
</html>