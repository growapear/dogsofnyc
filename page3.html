<!DOCTYPE html>
<html lang="en">

<title>Dog in Queens</title>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/2.2.2/scrollama.min.js"></script> -->
    <script src="scrollama.min.js"></script>
   <link rel="stylesheet" href="style.css" /> 

</head>
<body>
    <section id="intro">
        <div class="intro-content">
            <h1>The Dogs of New York City</h1>
        </div>
        <h4><strong>Uncover NYC's dog culture through names that reflect each borough's unique charm.</strong></h4>
            <div id="view">
            <p>Select your interest borough</p>
        </div>
            <nav>
                <ul>
                    <li><a class="nav-button" href="index.html">Manhattan</a></li>
                    <li><a class="nav-button" href="page1.html">Brooklyn</a></li>
                    <li><a class="nav-button" href="page2.html">Bronx</a></li>
                    <li><a class="nav-button" href="page3.html">Queens</a></li>
                    <li><a class="nav-button" href="page4.html">Staten Island</a></li>
                </ul>
            </nav>
            <div id="scroll">
                <h5><strong><em>Scroll to explore</em></strong></h5>
                        </div>
        </div>
    </section>
    <div id="map-container">
        <div id="map" class="sticky-map"></div>
    </div>
    
    <main id="project-wrapper">
        <section id="scrolly">
            <article>
                <div class="step" data-step="0">
                    <img src="assets/dogoverall.png" alt="Dogs of NYC" class="header-image">
                    <h3><strong>The Dogs of New York City</strong></h3>
                    <h5 style="font-weight: normal; font-style: normal;">As the sun rises over New York City, the streets begin to bustle not just with humans, but with their loyal canine companions. In every neighborhood, from the lively streets of Brooklyn to the more refined avenues of Manhattan, dogs are an integral part of city life. Each borough has its own unique dog culture, and with it, its own popular dog names. This interactive exploration will take you on a journey through the neighborhoods of New York City, uncovering the stories behind the most beloved dog names and how they reflect the character of each borough. So, let's meet the dogs of NYC, one name at a time.</h5>
                    <h3><strong>Queens — The Diverse Pups</strong></h3>
                    <p class="description-text" style="font-style: normal;">Queens, the melting pot of New York City, is where dogs from all walks of life come together with names as diverse as their owners. Whether it's the timeless Bella or the adventurous Rocky, the borough’s dogs reflect the rich blend of cultures and personalities. With names like Milo, Buddy, and Lola, Queens pups embrace both the familiar and the unique, creating a perfect harmony between tradition and modernity.</p>
                    <p class="source-text">Based on Dog License Data from 2014-2024 <a href="https://data.cityofnewyork.us/Health/NYC-Dog-Licensing-Dataset/nu7n-tubp/about_data" target="_blank">NYC OpenData</a></p>
                </div>
                <div class="step" data-step="1">
                    <img src="assets/max.png" alt="Max" class="header-image">
                    <h3><strong> "Max"</strong></h3>
                    <h5><strong>The Top Male Name in Queens</strong></h5>
                    <p class="description-text" style="font-style: normal;">Max is a crowd favorite in Queens, as it’s an approachable name with a strong presence, much like the borough itself. Max is perfect for pups who are as playful as they are loyal, navigating the diverse neighborhoods of Queens with ease—whether they’re chasing a ball in Flushing Meadows or cruising through Astoria’s dog-friendly parks.
                    </p>
                </div>
                <div class="step" data-step="2">
                    <img src="assets/bella.png" alt="Bella" class="header-image">
                    <h3><strong> "Bella"</strong></h3>
                    <h5><strong>The Top Female Name in Queens</strong></h5>
                    <p class="description-text" style="font-style: normal;">Bella is also the top female dog name in Queens, where the borough’s diversity is reflected in the names of its furry residents. Bella is a universally adored name that speaks to both beauty and charm, fitting in seamlessly whether your pup is enjoying the open spaces of Flushing Meadows or checking out the local sights in Astoria. Queens’ Bella dogs know how to strike the perfect balance between being playful and poised.
                    </p>
                </div>                
                  <div class="step" data-step="3">
                    <h3 class="smaller-heading" style="margin-top: 3rem;"><strong>Time Trends showing how dog names have evolved over the years</strong></h3>
                    <p class="description-text compact" style="font-style: normal;">"Max" emerged as the most popular dog name in Queens in 2016, with a whopping 17,424 dogs carrying the name. A timeless and strong choice, Max reflects the borough's hardworking and diverse energy. From Flushing to Astoria, Max is a favorite among dog owners who appreciate a name that's simple, strong, and loyal. Just like the borough itself, Max is no-nonsense but filled with heart. Whether hanging out at a local park or enjoying the neighborhood’s global flavor, Max is a dog that embodies Queens’ dynamic and inclusive spirit.
                    </p>
                    <div class="chart-container" id="chart4" style="margin-top: -2rem;"></div>
                </div>
                  
                <div class="step" data-step="4">
                    <h3 style="margin-top: 2rem;"><strong>Queens's Most Pawpular: Yorkshire Terrier & Shih Tzu</strong></h3>
                    <p class="description-text" style="font-style: normal; font-size: 0.85rem;">Queens, with its eclectic neighborhoods and rich cultural diversity, is the perfect backdrop for the energetic Yorkie and the laid-back Shih Tzu. Yorkies, with their compact size and bold spirit, are frequently seen navigating the busy streets of Astoria or taking in the views of Flushing Meadows Park. These feisty dogs thrive in the multicultural hustle and bustle, often leading their owners on adventures through the borough’s vibrant food scene. Meanwhile, Shih Tzus, adored for their calm and affectionate nature, make ideal companions for peaceful walks along Astoria Park or relaxing afternoons at the Queens Botanical Garden, blending seamlessly into the borough’s calm yet lively atmosphere.</p>
                    
                    <div class="dropdown" style="margin: 10px 0;">
                        <label for="dogSelector">Select Dog Breed:</label>
                        <select id="dogSelector">
                            <option value="all">-- Select a Dog Name --</option>
                        </select>
                    </div>

                    <div id="piechart4" class="borough-container">
                    </div>
                    <div class="tooltip" id="tooltip"></div>
                </div>
            </article>
        </section>
    </main>

   
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="piechart.js"></script>
    <script>


// Using d3 for convenience
var main = d3.select("main");
var scrolly = main.select("#scrolly");
var steps = scrolly.selectAll(".step");


// Initialize the scrollama
var scroller = scrollama();

// Resize function to set step heights
function handleResize() {
    var stepH = Math.floor(window.innerHeight * 0.75);
    steps.style("height", stepH + "px");
    scroller.resize();
}



// Setup the Scrollama instance, pass callback functions
scroller.setup({
    step: '.step',
    offset: 0.5,
    order: true, // Scrollama will trigger the steps in order
    once: false // Allow steps to be triggered multiple times

}).onStepEnter(handleStepEnter);

// Scrollama event handler
function handleStepEnter(response) {
    if (!map.isStyleLoaded()) {
        console.warn("Map style not fully loaded yet.");
        return;
    }

    steps.classed("is-active", false);
    d3.select(response.element).classed("is-active", true);

    const currentStep = response.element.getAttribute('data-step');

    // Reset filters initially (optional, based on your use case)
    map.setFilter('dog-wordcloud-layer', null);

    switch (currentStep) {
        case '0':
            // Step 0: Do not show the layer (hide)
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'none');
            break;
        case '1':
            // Step 1: Show only blue items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['==', ['get', 'Color'], 'blue']);
            break;
        case '2':
            // Step 2: Show only pink items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['==', ['get', 'Color'], 'pink']);
            break;
        case '3':
            // Step 3: Show both blue and pink items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['in', ['get', 'Color'], 'blue', 'pink']);
            break;
        case '4':
            // Step 4: Show both blue and pink items
            map.setLayoutProperty('dog-wordcloud-layer', 'visibility', 'visible');
            map.setFilter('dog-wordcloud-layer', ['in', ['get', 'Color'], 'blue', 'pink']);
            break;
        default:
            console.warn(`No action defined for step ${currentStep}`);
    }
}



// Resize event listener
window.addEventListener('resize', handleResize);

// Load the map and then initialize the scrollytelling
mapboxgl.accessToken = 'pk.eyJ1IjoicGFueWFudXMiLCJhIjoiY2x6MXo0Ym9jMWZ6cjJrb2l6YXk2NnAzaSJ9._smojqWBDds304Vg0Ubtmw';

        // Initialize the Map
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/panyanus/cm2mt0d7o004x01qjhaprhmtg',
            center: [-73.8949, 40.7282], // Adjust as necessary
            zoom: 11,
            projection: 'mercator'
        });

// Load the map and add the tileset source
map.on('load', () => {
    console.log('Map style is fully loaded.');

    // Your layer and source addition code here
    map.addSource('dog-wordcloud-source', {
        type: 'vector',
        url: 'mapbox://panyanus.1w0owcsq'
    });

    map.addLayer({
        id: 'dog-wordcloud-layer',
        type: 'symbol',
        source: 'dog-wordcloud-source',
        'source-layer': 'qn-wordcloud_data_top5_lat_ln-d2heyo',
        layout: {
            'text-field': ['get', 'AnimalName'],
            'text-size': ['get', 'Size'],
            'text-allow-overlap': true
        },
        paint: {
        'text-color': [
            'match',
            ['get', 'Color'], // 获取 'Color' 字段的值
            'pink', '#E754A3', // 适中的粉色
            'blue', '#4D8FD3', // 适中的蓝色
            '#000000' // 默认颜色（黑色），如果没有匹配
        ],
        'text-opacity': 1
}
    });
    // Add the source for the boundary data
    map.addSource('boundary-source', {
        type: 'vector',
        url: 'mapbox://panyanus.6tt4efg4' // Ensure this matches your tileset ID
    });

    // Add a layer for boundaries
    map.addLayer({
        id: 'boundary', // Updated layer ID
        type: 'line', // Use 'line' type for boundaries
        source: 'boundary-source', // Use the correct source name
        'source-layer': 'qn-neighborhood_top5_summary-568e2o', // Update to the correct source-layer for boundaries
        layout: {
            'line-join': 'round',
            'line-cap': 'round'
        },
        paint: {
            'line-color': '#ffffff', // White color for boundary lines
            'line-width': 2 // Adjust the line width as needed
        }
    });
});

                                                              
    </script>
    
</body>
</html>